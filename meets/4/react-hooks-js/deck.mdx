import { Head, Image, Notes, Appear, Steps } from 'mdx-deck';
import Counter from './Counter';
import CustomHook from '!raw-loader!./CustomHook.jsx'
import CustomLiveCode from './CustomLiveCode';
import Footer from './Footer';
import FunctionalUpdate from '!raw-loader!./FunctionalUpdate.jsx'
import Lifecycles from '!raw-loader!./Lifecycles.jsx'
import SetState from '!raw-loader!./SetState.jsx'
import UseEffect from '!raw-loader!./UseEffect.jsx'
import UseEffectParameters from '!raw-loader!./UseEffectParameters.jsx'
import UseState from '!raw-loader!./UseState.jsx'
import useCustomHook from 'UseCustomHook.jsx'
import UseEffecttest from 'UseEffecttest.jsx'
import CustomHooktest from 'CustomHooktest.jsx'
import CustomHooktest2 from 'CustomHooktest2.jsx'
import UseReducertest from 'UseReducertest.jsx'

export { swiss as theme } from '@mdx-deck/themes'

<Head>
	<title>React Hooks</title>
</Head>

# React Hooks

15.10.2019

Torsten Stelljes

<Footer/>

---

<CustomLiveCode title={'setState'} code={SetState} />

---

<CustomLiveCode title={'useState'} code={UseState} />

---

<CustomLiveCode title={'life cycles'} code={Lifecycles} />

---

<CustomLiveCode title={'useEffect'} code={UseEffect} />

---

<CustomLiveCode title={'useEffect parameters'} code={UseEffectParameters} />

---

# subscription with useEffect

```jsx
import React, {useEffect} from 'react'

const ComponentWithSubscription = () => {
  // ...
  useEffect(() => {
    subscribeToSomething(/*...*/)
    return () => {
      unsubscribeFromSomething(/*...*/)
    }
  })
  // ...
}
```

---

# subscription with life cycles

```jsx
import React from 'react'

class ComponentWithSubscription extends React.Component {
  // ...
  componentDidMount() {
    subscribeToSomething(/*...*/)
  }
  componentDidUpdate() {
    subscribeToSomething(/*...*/)
    unsubscribeFromSomething(/*...*/)
  }
  componentDidUnmount() {
    unsubscribeFromSomething(/*...*/)
  }
  // ...
}
```

---

<CustomLiveCode title={'functional update'} code={FunctionalUpdate} />

---

# Regeln

* Hooks heiÃŸen useSomeName
* Hooks gibt es nur in funktionalen Komponenten und anderen Hooks
* Hooks stehen stets auf der obersten Ebene

---

# a custom hook to be used

```jsx
const useCustomHook = interval => {
    const [count, setCount] = useState(0)

    useEffect(() => {
        const id = setInterval(() => {
            setCount(count => count + 1)
        }, interval)
        return () => clearInterval(id);
    }, []);

    return <p>{count}</p>
}
```

---

<CustomLiveCode title={'custom hooks'} code={CustomHook} scope={{useCustomHook}}/>

---

<div>
<UseReducertest />
</div>

---

# lazy initialization

```jsx
const UseStateWithLazyInitialization = () => {
  const [state, setState] = useState(initFunction)
  // ...
}

const UseRenderWithLazyInitialization = () => {
  const [state, setState] = useState(initFunction,initParameter)
  // ...
}
```
<div>
<LazyInitialization />
</div>

---

<div>
<CustomHooktest />
</div>

---

<div>
<CustomHooktest2 />
</div>

---

<CustomLiveCode title={'react-live'} code={`() => {
    const [count, setCount] = useState(0)
    return (
        <>
            Count: {count}
            <button onClick={() => setCount(0)}>Reset</button>
            <button onClick={() => setCount(prevCount => prevCount + 1)}>+</button>
            <button onClick={() => setCount(prevCount => prevCount - 1)}>-</button>
        </>
    )
}`
} />

```jsx
import React from 'react'

export default props =>
  <div style={{ color: 'red' }}>
    {props.children}
  </div>

export const Beep = props =>
  <Hello>
    {props.children}
  </Hello>

```

## This is v2

---

## What's New

<ul>
  <Appear>
    <li>Reach Router</li>
    <li>Less opinionated styles</li>
    <li>more stuff</li>
  </Appear>
</ul>

---

<Image
  src='https://source.unsplash.com/random/1024x768'
  size='contain'
/>

---

## This slide has notes

<Notes>
  Hello, secret speaker notes
</Notes>

---

```js
const codeExample = require('./code-example')
```

---

## More Appear

<Appear>
  <div>One</div>
  <div>Two</div>
  <div>Three</div>
  <div>Four</div>
  <div>Five</div>
  <div>Six</div>
</Appear>

---

## Steps Components

<Steps
  length={3}
  render={({ step }) => (
    <pre>
      Step: {step}
    </pre>
  )}
/>

---

## Last Slide